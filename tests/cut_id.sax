type nat = +{ 'zero : 1, 'succ : nat }

proc pred (d : nat) (x : nat) =
    cut z : nat
        id z x
    read z {
    | 'zero(u) => cut w : 1
                    id w u
                  write d 'zero(w)
    | 'succ(y) => id d y
    }

proc one (d : nat) =
  cut z : nat
    call zero z
    call succ d z

proc main (d : nat) =
    cut o : nat
        call one o
    call pred d o
